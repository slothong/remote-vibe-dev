# Plan
## SSH 연결 기능
- [x] SSH 연결 정보를 저장하는 모델을 생성할 수 있다
- [x] SSH 연결 정보의 유효성을 검증할 수 있다
- [x] SSH 클라이언트로 원격 서버에 연결할 수 있다
- [x] SSH 연결 실패 시 에러를 반환한다
- [x] SSH 연결 성공 시 세션을 유지한다
- [x] SSH 연결을 종료할 수 있다

## WebSocket 브릿지 서버
- [x] WebSocket 서버를 시작할 수 있다
- [x] WebSocket 클라이언트 연결을 수락할 수 있다
- [x] WebSocket으로 메시지를 수신할 수 있다
- [x] WebSocket으로 메시지를 전송할 수 있다
- [x] WebSocket과 SSH 세션 간 데이터를 전달할 수 있다
- [x] 클라이언트 연결 해제를 처리할 수 있다

## 시작 화면 UI
- [x] SSH 연결 폼을 렌더링할 수 있다
- [x] host 입력 필드를 표시한다
- [x] port 입력 필드를 표시한다
- [x] username 입력 필드를 표시한다
- [x] 인증 방법 선택 (key/password)을 표시한다
- [x] password 입력 필드를 표시한다
- [x] SSH key 파일 선택 기능을 표시한다
- [x] 연결 버튼을 표시한다
- [x] 연결 버튼 클릭 시 SSH 연결을 시도한다
- [x] 연결 성공 시 메인 화면으로 이동한다
- [x] 연결 실패 시 에러 메시지를 표시한다

## 메인 화면 - 터미널
- [x] 터미널 컴포넌트를 렌더링할 수 있다
- [x] 터미널을 화면 하단에 배치한다
- [x] 터미널 스크롤을 지원한다
- [x] 터미널 크기 조절을 지원한다 (FitAddon)
- [x] SSH 셸 세션을 시작할 수 있다
- [x] SSH 셸 I/O를 WebSocket으로 브릿징한다
- [x] 서버에서 WebSocket 서버를 시작한다
- [x] 터미널 초기화 시 WebSocket에 연결한다
- [x] 터미널 입력을 WebSocket으로 전송한다
- [x] WebSocket 메시지를 터미널에 출력한다
- [x] 터미널에서 키보드 입력을 처리한다
- [x] WebSocket 연결 성공 시 claude 명령을 실행한다
- [x] WebSocket 연결 성공 시 remote-dev-workspace에서 claude 명령을 실행한다

## plan.md 파싱 및 관리
- [x] plan.md 파일을 읽을 수 있다
- [x] plan.md의 마크다운을 파싱할 수 있다
- [x] 섹션 제목을 추출할 수 있다
- [x] 체크박스 항목을 추출할 수 있다
- [x] 체크 상태를 파싱할 수 있다
- [x] 체크리스트 데이터를 구조화된 형태로 변환할 수 있다
- [x] plan.md에 새 항목을 추가할 수 있다
- [x] plan.md에서 항목을 삭제할 수 있다
- [x] plan.md의 체크 상태를 업데이트할 수 있다
- [x] plan.md 파일을 저장할 수 있다

## 메인 화면 - 체크리스트
- [x] 체크리스트 컴포넌트를 렌더링할 수 있다
- [x] 섹션별로 그룹화된 체크리스트를 표시한다
- [x] 각 섹션 제목을 표시한다
- [x] 각 체크박스 항목을 표시한다
- [x] 체크박스 상태를 시각적으로 표시한다
- [x] 각 항목에 go 버튼을 표시한다
- [x] go 버튼 클릭 시 claude /go 커맨드를 실행한다
- [x] 각 항목에 삭제 버튼을 표시한다
- [x] 삭제 버튼 클릭 시 plan.md에서 항목을 삭제한다
- [x] 각 섹션에 항목 추가 폼을 표시한다
- [x] 항목 추가 폼에서 새 항목을 입력할 수 있다
- [x] 새 항목 추가 시 plan.md에 항목을 추가한다
- [x] plan.md 변경 시 체크리스트를 재렌더링한다


## E2E 테스트 환경 구성
- [x] Playwright 설치 및 설정
- [x] playwright.config.ts 파일 생성
- [x] E2E 테스트 디렉토리 구조 생성 (e2e/fixtures, e2e/specs)
- [x] Mock SSH 서버 구현 (e2e/fixtures/ssh-server.ts)
- [x] 테스트용 SSH 키 생성
- [x] Global setup/teardown 스크립트 작성
- [x] 테스트용 plan.md fixture 생성
- [x] webServer 설정으로 client/server 자동 시작
- [x] package.json에 E2E 테스트 스크립트 추가

## E2E 테스트 시나리오 구현
- [x] SSH 연결 플로우 테스트 작성
- [x] 연결 폼 입력 테스트
- [x] 연결 성공 시 메인 화면 전환 확인
- [x] 체크리스트 컴포넌트 렌더링 확인
- [x] 터미널 컴포넌트 렌더링 확인
- [x] 체크리스트 항목 추가 테스트
- [x] 체크리스트 항목 체크/언체크 테스트
- [x] 체크리스트 항목 삭제 테스트
- [x] Go 버튼 클릭 시 터미널 명령 실행 테스트
- [x] WebSocket 메시지 송수신 테스트
- [x] plan.md 변경 사항 반영 테스트
- [x] 에러 처리 및 엣지 케이스 테스트

## 통합 테스트
- [x] 시작 화면에서 SSH 연결 후 메인 화면으로 전환된다
- [x] 메인 화면에서 체크리스트와 터미널이 동시에 표시된다
- [x] 터미널에서 명령 실행 결과가 정상적으로 표시된다
- [x] 체크리스트 항목 변경이 plan.md에 반영된다 [x] plan.md 파일 변경이 체크리스트에 반영된다

## 추가 작업
- [x] go 명령어는 "/go 2.2" 와 같은 형식으로 보낸다. "2.2"는 plan.md의 항목 번호이다. 예를 들어 2 번째 섹션의 2번째 항목을 의미한다.
- [x] 터미널에서 esc 키를 눌러도 focus가 해제되지 않아야 한다.
- [x] go 명령어를 전송한 후 enter 를 같이 전송해서 명령어가 실행되게 해야 한다.
- [x] 체크리스트의 체크박스는 사용자가 클릭해서 상태 변경할 수 없다.
- [x] ssh 연결 후 tmux 세션을 시작한다. 세션 이름은 "remote-tdd-dev" 로 한다. 만약 세션이 이미 존재하면 해당 세션에 attach 한다. 세션에 attach 한 후에 claude 명령어를 실행한다.
- [x] remote-dev-workspace로 이동하는 명령어는 tmux 세션 열기 전에 실행되어야 한다.
- [x] tmux 세션이 이미 존재하는 경우, claude 명령어가 중복 실행되지 않도록 한다.
- [x] tmux 세션이 없는 경우 remote-dev-workspace로 이동한 후 세션을 생성하고, 세션이 이미 있는 경우에는 이동 없이 세션에 attach 한다.
- [x] go 명령어를 전송한 뒤 해당 항목은 disabled이고 go 버튼은 로딩중으로 표시한다.
- [x] ssh 연결 정보를 입력하는 폼에 "연결 정보 기억하기" 체크박스를 추가한다. 체크박스가 선택된 경우, 연결 정보를 로컬 스토리지에 저장하고 다음 접속 시 자동으로 불러온다. 패스워드나 키 파일 경로는 저장하지 않는다.
- [x] 로컬 스토리지에 연결 정보가 존재하는 경우 "연결 정보 기억하기" 체크박스를 enabled로 초기화한다.
